### 1. 人员配置策略
为了适应客流波动，不同日期的在岗人数配置如下：
- 周一至周四 (工作日)
    - 早班：1人
    - 晚班：2人
    - 单日总人次：3

- 周五至周日 (周末/高峰)
    - 早班：2人
    - 晚班：2人
    - 单日总人次：4

### 2. 核心约束条件 (硬性规则)

智能算法在生成排班时严格遵守以下逻辑：

1. **教练休息时间优先（第一优先级）**
    - 全职教练：建议每周工作5天，休息2天（双休），具体休息时间由教练在"可工作时间"中设置
    - 兼职教练：严格按照教练设置的"可工作时间"进行排班，无工作天数限制
    - 如果教练未设置可工作时间，默认全周可用
    - 如果教练某天所有班次都未勾选，该天为休息日

2. **工作天数约束**
    - 全职教练：系统**强制**限制每周最多工作5天，**必须**确保至少2天休息（双休）
    - 兼职教练：不受工作天数限制，完全按可用性设置灵活排班
    - 全职双休是硬性规则，即使在人手不足时也不会违反

3. **班次时间冲突检查**
    - 同一名教练在同一天内不能上时间重叠的班次
    - 算法会自动排除已有班次冲突的教练

4. **门店教练分配**
    - 主门店优先：优先使用以该门店为主门店的教练
    - 跨门店调配：如果主门店教练不足，可以调用关联门店的教练（已在该门店设置为非主门店）
    - 同一天限制：同一名教练同一天只能在一个门店工作


### 3. 公平性算法

排班优先级从高到低依次为：

1. **主门店优先**：优先选择以该门店为主门店的教练
2. **周末班次平衡**：优先分配给还没有周末班的教练
3. **工时公平性**：优先分配给当前累计工时最少的教练
4. **雇佣类型中立**：全职和兼职教练在排班优先级上无差异，完全按照可用性和工时公平性分配

### 4. 班次空缺处理

- **优先确保有人值班**：即使找不到足够的教练满足最小人数要求，只要有1人可用，也会分配，确保班次不空缺
- **人数不足警告**：当实际分配人数少于最小需求时，系统会发出警告，但仍然会分配找到的教练
- **完全空缺**：只有在完全找不到任何可用教练时，班次才会保持空缺
- **不强制分配**：系统不会为了填满班次而违反教练的休息时间或可用性设置
- **手动补充**：管理员可以在排班后手动为人数不足的班次补充教练